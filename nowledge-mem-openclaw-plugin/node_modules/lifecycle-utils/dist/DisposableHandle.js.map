{"version":3,"file":"DisposableHandle.js","sourceRoot":"","sources":["../src/DisposableHandle.ts"],"names":[],"mappings":"AAAA;;;;;GAKG;AACH,MAAM,OAAO,gBAAgB;IACzB,gBAAgB,CAAS,UAAU,CAA2B;IAE9D,YAAmB,SAAqB;QACpC,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAE5B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC3D,CAAC;IAED,IAAW,QAAQ;QACf,OAAO,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC;IACnC,CAAC;IAEM,CAAC,MAAM,CAAC,OAAO,CAAC;QACnB,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAEM,OAAO;QACV,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,EAAE,CAAC;YAC1B,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;YAClC,OAAO,IAAI,CAAC,UAAU,CAAC;YAEvB,SAAS,EAAE,CAAC;QAChB,CAAC;IACL,CAAC;CACJ","sourcesContent":["/**\n * An object that provides a `.dispose()` method that can called only once.\n *\n * Calling `.dispose()` will call the provided `onDispose` function only once.\n * Any subsequent calls to `.dispose()` will do nothing.\n */\nexport class DisposableHandle {\n    /** @internal */ private _onDispose: (() => void) | undefined;\n\n    public constructor(onDispose: () => void) {\n        this._onDispose = onDispose;\n\n        this.dispose = this.dispose.bind(this);\n        this[Symbol.dispose] = this[Symbol.dispose].bind(this);\n    }\n\n    public get disposed() {\n        return this._onDispose == null;\n    }\n\n    public [Symbol.dispose]() {\n        this.dispose();\n    }\n\n    public dispose() {\n        if (this._onDispose != null) {\n            const onDispose = this._onDispose;\n            delete this._onDispose;\n\n            onDispose();\n        }\n    }\n}\n"]}